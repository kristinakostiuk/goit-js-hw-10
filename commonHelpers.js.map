{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst refs = {\n    input: document.querySelector('input[type=text]'),\n    button: document.querySelector('[data-start]'),\n    valueDays: document.querySelector('[data-days]'),\n    valueHours: document.querySelector('[data-hours]'),\n    valueMinutes: document.querySelector('[data-minutes]'),\n    valueSeconds: document.querySelector('[data-seconds]')\n};  \n\nlet userSelectedDate = null;\nlet countdownInterval = null;\nrefs.button.disabled = true;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        userSelectedDate = selectedDates[0];\n        const currentTime = Date.now();\n        if (userSelectedDate < currentTime) {\n            iziToast.error({\n                message: 'Please choose a date in the future',\n                position: 'topRight',\n                maxWidth: '302px'\n            });\n            refs.button.disabled = true;\n        } else {\n            refs.button.disabled = false;\n        }\n    },\n};\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    flatpickr(refs.input, options);\n})\n\nrefs.button.addEventListener(\"click\", () => {\n    start();\n    refs.input.disabled = true;\n    refs.button.disabled = true;\n});\n\nfunction start() {\n    if (!userSelectedDate) return;\n\n    const currentTime = Date.now();\n    const deltaTime = userSelectedDate - currentTime;\n    if (deltaTime <= 0) return;\n\n    updateClockFace(getTimeComponents(deltaTime));\n\n    countdownInterval = setInterval(() => {\n        const currentTime = Date.now();\n        const deltaTime = userSelectedDate - currentTime;\n        if (deltaTime <= 0) {\n            refs.input.disabled = false;\n            refs.button.disabled = false;\n            clearInterval(countdownInterval);\n            updateClockFace();\n            return;\n        }\n        updateClockFace(getTimeComponents(deltaTime));\n    }, 1000);\n};\n\nfunction getTimeComponents(time) {\n    const days = pad(Math.floor((time % (1000 * 60 * 60 * 24 * 7)) / (1000 * 60 * 60 * 24)));\n    const hours = pad(Math.floor((time % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)));\n    const mins = pad(Math.floor((time % (1000 * 60 * 60)) / (1000 * 60)));\n    const secs = pad(Math.floor((time % (1000 * 60)) / 1000));\n    return { days, hours, mins, secs };\n}\n\nfunction pad(value) {\n    return String(value).padStart(2, '0');\n}\n\nfunction updateClockFace({days, hours, mins, secs}) {\n    if (!days || !hours || !mins || !secs) {\n        refs.valueDays.textContent = '00';\n        refs.valueHours.textContent = '00';\n        refs.valueMinutes.textContent = '00';\n        refs.valueSeconds.textContent = '00';\n        return;\n    }\n    refs.valueDays.textContent = `${days}`;\n    refs.valueHours.textContent = `${hours}`;\n    refs.valueMinutes.textContent = `${mins}`;\n    refs.valueSeconds.textContent = `${secs}`;\n}\n"],"names":["refs","userSelectedDate","countdownInterval","options","selectedDates","currentTime","iziToast","flatpickr","start","deltaTime","updateClockFace","getTimeComponents","time","days","pad","hours","mins","secs","value"],"mappings":"8IAMA,MAAMA,EAAO,CACT,MAAO,SAAS,cAAc,kBAAkB,EAChD,OAAQ,SAAS,cAAc,cAAc,EAC7C,UAAW,SAAS,cAAc,aAAa,EAC/C,WAAY,SAAS,cAAc,cAAc,EACjD,aAAc,SAAS,cAAc,gBAAgB,EACrD,aAAc,SAAS,cAAc,gBAAgB,CACzD,EAEA,IAAIC,EAAmB,KACnBC,EAAoB,KACxBF,EAAK,OAAO,SAAW,GAEvB,MAAMG,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBH,EAAmBG,EAAc,CAAC,EAClC,MAAMC,EAAc,KAAK,MACrBJ,EAAmBI,GACnBC,EAAS,MAAM,CACX,QAAS,qCACT,SAAU,WACV,SAAU,OAC1B,CAAa,EACDN,EAAK,OAAO,SAAW,IAEvBA,EAAK,OAAO,SAAW,EAE9B,CACL,EAEA,SAAS,iBAAiB,mBAAoB,UAAY,CACtDO,EAAUP,EAAK,MAAOG,CAAO,CACjC,CAAC,EAEDH,EAAK,OAAO,iBAAiB,QAAS,IAAM,CACxCQ,IACAR,EAAK,MAAM,SAAW,GACtBA,EAAK,OAAO,SAAW,EAC3B,CAAC,EAED,SAASQ,GAAQ,CACb,GAAI,CAACP,EAAkB,OAEvB,MAAMI,EAAc,KAAK,MACnBI,EAAYR,EAAmBI,EACjCI,GAAa,IAEjBC,EAAgBC,EAAkBF,CAAS,CAAC,EAE5CP,EAAoB,YAAY,IAAM,CAClC,MAAMG,EAAc,KAAK,MACnBI,EAAYR,EAAmBI,EACrC,GAAII,GAAa,EAAG,CAChBT,EAAK,MAAM,SAAW,GACtBA,EAAK,OAAO,SAAW,GACvB,cAAcE,CAAiB,EAC/BQ,IACA,MACH,CACDA,EAAgBC,EAAkBF,CAAS,CAAC,CAC/C,EAAE,GAAI,EACX,CAEA,SAASE,EAAkBC,EAAM,CAC7B,MAAMC,EAAOC,EAAI,KAAK,MAAOF,EAAQ,OAA6B,KAAoB,CAAC,EACjFG,EAAQD,EAAI,KAAK,MAAOF,GAAQ,IAAO,GAAK,GAAK,KAAQ,IAAO,GAAK,GAAG,CAAC,EACzEI,EAAOF,EAAI,KAAK,MAAOF,GAAQ,IAAO,GAAK,KAAQ,IAAO,GAAG,CAAC,EAC9DK,EAAOH,EAAI,KAAK,MAAOF,GAAQ,IAAO,IAAO,GAAI,CAAC,EACxD,MAAO,CAAE,KAAAC,EAAM,MAAAE,EAAO,KAAAC,EAAM,KAAAC,CAAI,CACpC,CAEA,SAASH,EAAII,EAAO,CAChB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEA,SAASR,EAAgB,CAAC,KAAAG,EAAM,MAAAE,EAAO,KAAAC,EAAM,KAAAC,CAAI,EAAG,CAChD,GAAI,CAACJ,GAAQ,CAACE,GAAS,CAACC,GAAQ,CAACC,EAAM,CACnCjB,EAAK,UAAU,YAAc,KAC7BA,EAAK,WAAW,YAAc,KAC9BA,EAAK,aAAa,YAAc,KAChCA,EAAK,aAAa,YAAc,KAChC,MACH,CACDA,EAAK,UAAU,YAAc,GAAGa,CAAI,GACpCb,EAAK,WAAW,YAAc,GAAGe,CAAK,GACtCf,EAAK,aAAa,YAAc,GAAGgB,CAAI,GACvChB,EAAK,aAAa,YAAc,GAAGiB,CAAI,EAC3C"}